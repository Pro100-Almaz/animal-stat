{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <title>Document</title>
</head>
<body>
    <div class="navbar navbar-dark bg-dark box-shadow">
        <div class="container d-flex justify-content-between">
            <a href="{% url 'welcome' %}" class="navbar-brand d-flex align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
            <strong>Album</strong>
            </a>
        </div>
    </div>
    <main role="main" class="col-md-9 m-auto col-lg-10 pt-3 px-4 justify-content-center">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
          <h1 class="h2">Таблица</h1>
          <div class="btn-toolbar mb-2 mb-md-0">
            <a href="{% url 'add_crime' %}">
                <button class="btn btn-sm btn-outline-secondary">
                Добавить данные
                </button>
            </a>
          </div>
        </div>


        <h2>Количество уголовных дел</h2>
        <form method="post">
          {% csrf_token %}
          <div class="table-responsive">
            <table class="table table-striped table-sm">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Год / Вид животного</th>
                  <th>Сайга</th>
                  <th>Кр.книжные</th>
                  <th>Иные</th>
                  <th>Общий итог</th>
                  <th>Разница с прош. годом</th>
                </tr>
              </thead>
              
                <tbody>
                  {% for record in records %}
                    <tr>
                        <td><input type="checkbox" name="data" value="{{ record.year }}"></td>
                        <td>{{ record.year }}</td>
                        <td>{{ record.saiga }}</td>
                        <td>{{ record.red_book }}</td>
                        <td>{{ record.others }}</td>
                        <td>{{ record.total }}</td>
                        {% if record.percentage > 0 %}  
                          <td class="text-success">{{ record.percentage }}%</td>
                        {% else %}
                          <td class="text-danger">{{ record.percentage }}%</td>
                        {% endif %}
                    </tr>
                  {% endfor %}
                  <tr class="bg-success">
                    <td><strong>Итог</strong> </td>
                    <td></td>
                    <td>{{ saiga_total }}</td>
                    <td>{{ red_book_total }}</td>
                    <td>{{ other_total }}</td>
                    <td>{{ total_total }}</td>
                    <td></td>
                  </tr>
                </tbody>
              
            </table>
          </div>
          <button type="submit" class="btn btn-primary">Сравнить</button>
        </form>
        {% if percentage %}
          Разница между {{ percentage.first_val }} годом и {{ percentage.second_val }} годом {{ percentage.number }}%.
        {% else %}
          *Выделите два года для сравнения изменений 
        {% endif %}
      </main>
</body>
</html>